<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TH OS Simu</title>
    
    <style>
        /* --- 1. General Reset --- */
        * { margin: 0; padding: 0; box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; }

        /* --- 2. Background --- */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            height: 100vh; height: 100dvh; 
            background-image: url('https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?q=80&w=1920&auto=format&fit=crop');
            background-size: cover; background-position: center;
            overflow: hidden; display: flex; flex-direction: column; align-items: center; position: relative;
        }

        /* --- 3. PUNCH HOLE CAMERA --- */
        .punch-hole {
            position: absolute; top: 10px; left: 50%; transform: translateX(-50%);
            width: 18px; height: 18px; background-color: #000; border-radius: 50%;
            z-index: 1000; box-shadow: inset 0 0 2px rgba(255, 255, 255, 0.2); 
            pointer-events: none;
        }

        /* --- 4. Status Bar --- */
        .status-bar {
            position: absolute; top: 0; left: 0; width: 100%; height: 44px;
            display: flex; justify-content: space-between; align-items: center; padding: 0 20px;
            color: white; z-index: 900; font-weight: 600; font-size: 14px; transition: color 0.3s;
        }
        .status-bar.dark-mode { color: black; }
        .status-bar.dark-mode svg { fill: black; }
        .status-bar.dark-mode .battery-icon path { stroke: black; }
        .status-bar.dark-mode .battery-icon rect { fill: black; }
        .status-bar svg { fill: white; height: 12px; width: auto; transition: fill 0.3s; }
        .status-bar .icons { display: flex; gap: 6px; align-items: center; }
        .battery-icon { width: 22px !important; height: 22px !important; }

        /* --- 5. PANELS (Overlay) --- */
        .overlay-panel {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            z-index: 800; transform: translateY(-100%); transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            display: flex; flex-direction: column; padding: 60px 20px 20px 20px;
        }
        .overlay-panel.open { transform: translateY(0); }
        /* Notification */
        #notificationPanel { align-items: center; }
        .clock-large { font-size: 60px; color: white; font-weight: 200; margin-top: 40px; }
        .date-large { font-size: 18px; color: white; margin-bottom: 30px; opacity: 0.8; }
        .notif-card { width: 100%; background: rgba(255,255,255,0.8); border-radius: 15px; padding: 15px; margin-bottom: 10px; display: flex; gap: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .notif-icon { width: 40px; height: 40px; border-radius: 10px; display: flex; justify-content: center; align-items: center; font-size: 20px; color: white; }
        .notif-content h4 { font-size: 15px; margin-bottom: 4px; color: #333; }
        .notif-content p { font-size: 13px; color: #555; }
        /* Quick Panel */
        #quickPanel { padding: 60px 25px; }
        .quick-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px; }
        .quick-toggle { height: 90px; background: rgba(30,30,30,0.7); border-radius: 20px; display: flex; flex-direction: column; justify-content: space-between; padding: 15px; color: white; transition: 0.2s; cursor: pointer; }
        .quick-toggle.active { background: rgba(255,255,255,0.9); color: black; }
        .quick-icon-circle { width: 30px; height: 30px; border-radius: 50%; background: rgba(255,255,255,0.2); display: flex; justify-content: center; align-items: center; }
        .active .quick-icon-circle { background: #007AFF; color: white; }
        .slider-container { width: 100%; height: 50px; background: rgba(255,255,255,0.8); border-radius: 15px; margin-bottom: 15px; display: flex; align-items: center; padding: 0 15px; }
        .slider-icon { color: #555; margin-right: 10px; }
        .slider-bar { flex: 1; height: 6px; background: #ccc; border-radius: 3px; position: relative; }
        .slider-fill { width: 60%; height: 100%; background: #333; border-radius: 3px; }

        /* --- 6. PAGE CONTAINER --- */
        #pageContainer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        #pageContainer.show-feed { transform: translateX(100%); }

        /* FEED SCREEN */
        .feed-screen {
            position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
            padding: 80px 20px 20px 20px; background: rgba(255, 255, 255, 0.4);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            overflow-y: auto; display: flex; flex-direction: column; gap: 20px;
        }
        .feed-search { width: 100%; height: 50px; background: rgba(255,255,255,0.9); border-radius: 25px; display: flex; align-items: center; padding: 0 20px; color: #555; font-size: 16px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .feed-widget { background: rgba(255,255,255,0.8); border-radius: 20px; padding: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .widget-title { font-size: 14px; font-weight: bold; color: #8e8e93; margin-bottom: 10px; text-transform: uppercase; }
        .calendar-widget h2 { font-size: 32px; font-weight: 300; margin: 0; }
        .calendar-widget p { font-size: 16px; color: #555; }
        .news-item { display: flex; gap: 10px; margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid rgba(0,0,0,0.05); }
        .news-item:last-child { border: none; margin: 0; padding: 0; }
        .news-text h4 { font-size: 15px; margin-bottom: 5px; line-height: 1.3; }
        .news-text span { font-size: 12px; color: #888; }
        .news-img { width: 60px; height: 60px; background: #ddd; border-radius: 10px; object-fit: cover; }

        /* HOME SCREEN */
        .home-screen {
            position: absolute; top: 0; left: 0; width: 100%; max-width: 450px; height: 100%;
            padding-top: 80px; padding-left: 25px; padding-right: 25px;
            display: grid; grid-template-columns: repeat(4, 1fr); grid-auto-rows: min-content;
            row-gap: 25px; column-gap: 0px; justify-items: center;
            transition: transform 0.4s ease, opacity 0.4s ease; margin: 0 auto; right: 0;
            overflow-y: auto;
        }
        .home-screen::-webkit-scrollbar { display: none; }
        .home-screen.minimized { transform: scale(0.9); opacity: 0; pointer-events: none; }
        .app-item { display: flex; flex-direction: column; align-items: center; gap: 6px; width: 100%; cursor: pointer; transition: transform 0.2s; }
        .app-item:active { transform: scale(0.9); opacity: 0.8; }
        .app-label { color: white; font-size: 13px; font-weight: 500; text-shadow: 0 1px 4px rgba(0,0,0,0.6); text-align: center; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; width: 100%; }
        .app-icon { width: 65px; height: 65px; border-radius: 16px; display: flex; justify-content: center; align-items: center; box-shadow: 0 5px 12px rgba(0,0,0,0.2); overflow: hidden; }
        .app-icon img { width: 100%; height: 100%; object-fit: cover; }
        .app-icon svg { width: 32px; height: 32px; fill: white; }

        /* App Icon Colors */
        .phone, .message, .safari, .settings, .appstore, .music, .clock-icon, .weather, .manager, .notes, .mail, .files, .photos, .camera { background: transparent; }

        /* --- 7. DOK PANELƒ∞ --- */
        .dock {
            position: absolute; bottom: 85px; display: flex; gap: 15px; padding: 20px 25px;
            background: rgba(255, 255, 255, 0.25); backdrop-filter: blur(30px); -webkit-backdrop-filter: blur(30px);
            border-radius: 40px; border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 10px 30px rgba(0,0,0,0.15); z-index: 50;
            transition: transform 0.4s ease, opacity 0.4s ease;
        }
        .dock.hidden { transform: translateY(100px); opacity: 0; pointer-events: none; }
        @media (hover: hover) { .dock .app-icon:hover { transform: translateY(-10px) scale(1.1); transition: 0.2s; } }

        /* --- 8. T∆èTBƒ∞Q P∆èNC∆èR∆èL∆èRƒ∞ --- */
        .app-window {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-color: white; z-index: 200;
            display: flex; flex-direction: column;
            transform: translateY(100%); transition: transform 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
            overflow: hidden;
        }
        .app-window.active { transform: translateY(0); }

        /* --- 9. RECENTS MENYUSU --- */
        .recents-screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6); backdrop-filter: blur(5px);
            z-index: 250; display: none; flex-direction: column; align-items: center; justify-content: center; opacity: 0; transition: opacity 0.3s;
        }
        .recents-screen.show { display: flex; opacity: 1; }
        .recents-list { display: flex; gap: 20px; overflow-x: auto; padding: 20px; width: 100%; height: 70%; align-items: center; scroll-snap-type: x mandatory; }
        .recents-card { min-width: 240px; height: 400px; background: white; border-radius: 20px; display: flex; flex-direction: column; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.5); scroll-snap-align: center; transform: scale(0.9); transition: transform 0.2s; cursor: pointer; }
        .recents-card:hover { transform: scale(0.95); }
        .card-header { height: 50px; display: flex; align-items: center; padding: 0 15px; background: #f0f0f0; gap: 10px; font-weight: bold; font-size: 14px; }
        .card-icon { width: 24px; height: 24px; }
        .card-icon img { width: 100%; height: 100%; object-fit: cover; border-radius: 5px;}
        .card-icon svg { width: 100%; height: 100%; }
        .card-preview { flex: 1; background: #fff; display: flex; justify-content: center; align-items: center; color: #ccc; font-size: 50px; }
        .clear-all-btn { padding: 10px 20px; background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.4); border-radius: 20px; color: white; margin-top: 20px; cursor: pointer; font-size: 14px; }
        .no-recents { color: white; font-size: 18px; opacity: 0.7; }

        /* --- 10. Naviqasiya Barƒ± --- */
        .nav-bar {
            position: absolute; bottom: 0; left: 0; width: 100%; height: 60px;
            display: flex; justify-content: space-evenly; align-items: center;
            background: transparent; z-index: 600; padding-bottom: 5px;
            transition: background-color 0.3s ease;
        }
        .nav-bar.black-bg { background-color: black; }
        .nav-btn {
            height: 28px; width: 28px; /* Standardize size */
            opacity: 0.9; cursor: pointer; transition: 0.1s;
            padding: 8px; box-sizing: content-box; 
            filter: drop-shadow(0 1px 2px rgba(0,0,0,0.5));
            fill: white; /* Color for SVGs */
        }
        .nav-btn:active { transform: scale(0.8); opacity: 0.6; }

        /* --- APP STYLES --- */
        .header-light { padding: 50px 20px 10px 20px; background: white; border-bottom: 1px solid #f0f0f0; } .header-light h1 { font-size: 30px; color: #000; margin-bottom: 5px; } .search-bar { background: #e3e3e8; padding: 8px 12px; border-radius: 10px; color: #8e8e93; font-size: 15px; display: flex; align-items: center; gap: 5px; }
        #settingsApp { background-color: #f2f2f7; } .settings-group { background: white; border-radius: 12px; overflow: hidden; margin: 20px; margin-top: 0; } .settings-row { display: flex; align-items: center; padding: 12px 15px; border-bottom: 1px solid #f0f0f0; } .row-icon { width: 30px; height: 30px; border-radius: 7px; display: flex; justify-content: center; align-items: center; margin-right: 15px; color: white; } .bg-blue { background-color: #007AFF; } .bg-green { background-color: #34C759; } .bg-red { background-color: #FF3B30; } .bg-gray { background-color: #8E8E93; } .bg-orange { background-color: #FF9500; }
        .msg-list { flex: 1; overflow-y: auto; padding: 0 20px; } .msg-row { display: flex; align-items: center; padding: 15px 0; border-bottom: 1px solid #f0f0f0; } .msg-avatar { width: 45px; height: 45px; border-radius: 50%; background: #ccc; margin-right: 15px; display: flex; justify-content: center; align-items: center; color: white; font-weight: bold; font-size: 18px; } .msg-content { flex: 1; } .msg-name { font-weight: 600; font-size: 16px; margin-bottom: 2px; display: flex; justify-content: space-between; } .msg-date { font-weight: 400; color: #8e8e93; font-size: 14px; } .msg-preview { color: #8e8e93; font-size: 14px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: 250px; } .blue-dot { width: 10px; height: 10px; background: #007AFF; border-radius: 50%; margin-left: 10px; }
        .browser-toolbar { height: 90px; background: #f9f9f9; border-bottom: 1px solid #ccc; display: flex; align-items: flex-end; padding: 10px 20px; } .url-box { flex: 1; background: #e3e3e8; height: 36px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 14px; color: black; gap: 5px; margin-bottom: 5px;} .browser-content { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; background: white; } .google-logo { font-size: 50px; font-weight: bold; margin-bottom: 20px; letter-spacing: -2px; } .g-blue { color: #4285F4; } .g-red { color: #EA4335; } .g-yellow { color: #FBBC05; } .g-green { color: #34A853; } .fake-search { width: 80%; height: 45px; border: 1px solid #dfe1e5; border-radius: 24px; display: flex; align-items: center; padding: 0 15px; color: #777; box-shadow: 0 1px 6px rgba(32,33,36,0.1); }
        #cameraApp { background: black; } .camera-view { flex: 1; position: relative; background: #111; display: flex; align-items: center; justify-content: center; overflow: hidden; } video { width: 100%; height: 100%; object-fit: cover; } .camera-controls { height: 150px; background: black; display: flex; justify-content: space-around; align-items: center; padding-bottom: 30px; } .shutter-btn { width: 70px; height: 70px; border-radius: 50%; background: white; border: 4px solid rgba(255,255,255,0.3); background-clip: padding-box; cursor: pointer; } .cam-icon-btn { width: 40px; height: 40px; background: rgba(255,255,255,0.2); border-radius: 50%; display: flex; justify-content: center; align-items: center; } .cam-icon-btn svg { fill: white; width: 20px; height: 20px; }
        .phone-display-area { height: 35%; display: flex; flex-direction: column; justify-content: flex-end; align-items: center; padding-bottom: 20px; } #phoneNumber { font-size: 36px; font-weight: 500; min-height: 45px; } .dialer-pad { flex: 1; display: flex; justify-content: center; padding-bottom: 80px; } .dialer-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px 30px; } .dial-key { width: 75px; height: 75px; background-color: #f2f2f2; border-radius: 50%; display: flex; flex-direction: column; justify-content: center; align-items: center; cursor: pointer; } .dial-key:active { background-color: #d1d1d1; } .dial-num { font-size: 28px; font-weight: 500; } .dial-letters { font-size: 10px; font-weight: 600; } .call-btn { width: 75px; height: 75px; border-radius: 50%; background-color: #34C759; display: flex; justify-content: center; align-items: center; cursor: pointer; grid-column: 2; margin-top: 10px; } .call-btn svg { width: 35px; height: 35px; fill: white; }
        .store-content { flex: 1; overflow-y: auto; padding: 20px; padding-top: 10px; } .store-featured { width: 100%; height: 300px; border-radius: 15px; position: relative; overflow: hidden; margin-bottom: 30px; background-image: url('https://images.unsplash.com/photo-1550745165-9bc0b252726f?q=80&w=600&auto=format&fit=crop'); background-size: cover; background-position: center; display: flex; flex-direction: column; justify-content: flex-end; padding: 20px; } .featured-text { color: white; z-index: 2; } .featured-text h3 { font-size: 12px; text-transform: uppercase; color: rgba(255,255,255,0.8); margin-bottom: 5px; } .featured-text h2 { font-size: 28px; font-weight: bold; margin-bottom: 5px; line-height: 1.1; } .featured-text p { font-size: 14px; color: rgba(255,255,255,0.9); } .store-featured::after { content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 50%; background: linear-gradient(transparent, rgba(0,0,0,0.8)); } .store-section-title { font-size: 20px; font-weight: bold; margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center; } .store-section-title a { font-size: 14px; color: #007AFF; text-decoration: none; } .store-list { display: flex; flex-direction: column; gap: 20px; padding-bottom: 80px; } .store-item { display: flex; align-items: center; gap: 15px; } .store-item-icon { width: 60px; height: 60px; border-radius: 14px; background: #eee; overflow: hidden; } .store-item-icon img { width: 100%; height: 100%; object-fit: cover; } .store-item-info { flex: 1; } .store-item-name { font-size: 16px; font-weight: 500; color: #000; } .store-item-cat { font-size: 13px; color: #8e8e93; margin-top: 2px; } .get-btn { background: #f0f0f8; color: #007AFF; font-weight: bold; font-size: 13px; padding: 6px 18px; border-radius: 20px; border: none; cursor: pointer; transition: 0.2s; } .get-btn:active { opacity: 0.7; }
        #musicApp { background: white; } .music-hero { padding: 30px; display: flex; flex-direction: column; align-items: center; justify-content: center; background: linear-gradient(to bottom, #f0f0f5, #fff); border-bottom: 1px solid #f0f0f0; } .album-art { width: 250px; height: 250px; border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.2); margin-bottom: 25px; overflow: hidden; } .album-art img { width: 100%; height: 100%; object-fit: cover; } .music-info { text-align: center; margin-bottom: 20px; } .music-title { font-size: 22px; font-weight: bold; margin-bottom: 5px; } .music-artist { font-size: 16px; color: #ff0055; font-weight: 500; } .player-controls { display: flex; align-items: center; gap: 30px; margin-top: 10px; } .ctrl-btn { cursor: pointer; } .ctrl-btn svg { width: 28px; height: 28px; fill: #333; } .play-btn { width: 65px; height: 65px; background: #ff0055; border-radius: 50%; display: flex; justify-content: center; align-items: center; box-shadow: 0 5px 15px rgba(255, 0, 85, 0.4); cursor: pointer; transition: transform 0.1s; } .play-btn:active { transform: scale(0.95); } .play-btn svg { width: 30px; height: 30px; fill: white; margin-left: 4px; } .song-list-container { flex: 1; overflow-y: auto; padding: 0 20px; } .song-row { display: flex; align-items: center; padding: 15px 0; border-bottom: 1px solid #f9f9f9; } .song-idx { color: #ccc; width: 30px; font-size: 14px; } .song-meta { flex: 1; } .song-name { font-size: 16px; font-weight: 500; } .song-dur { font-size: 14px; color: #ccc; }
        #clockApp { background: black; color: white; justify-content: center; align-items: center; } .clock-container { text-align: center; margin-bottom: 50px; } .live-clock { font-size: 70px; font-weight: 200; letter-spacing: 2px; } .live-date { font-size: 20px; color: #888; text-transform: uppercase; letter-spacing: 1px; margin-top: 10px; } .clock-tabs { position: absolute; bottom: 20px; width: 100%; display: flex; justify-content: space-around; color: gray; font-size: 14px; padding-bottom: 50px; } .clock-tabs div { display: flex; flex-direction: column; align-items: center; gap: 5px; } .clock-tabs .active { color: orange; }
        #weatherApp { background: linear-gradient(to bottom, #4facfe 0%, #00f2fe 100%); color: white; } .weather-main { display: flex; flex-direction: column; align-items: center; margin-top: 60px; text-align: center; } .weather-temp { font-size: 90px; font-weight: 200; line-height: 1; letter-spacing: -2px; } .weather-city { font-size: 28px; font-weight: 600; margin-bottom: 5px; margin-top: 10px; } .weather-condition { font-size: 20px; opacity: 0.9; display: flex; align-items: center; gap: 10px; justify-content: center; margin-top: 5px; } .weather-icon-large svg { width: 40px; height: 40px; fill: white; } .weather-forecast { margin-top: auto; width: 100%; padding: 30px; background: rgba(0,0,0,0.1); backdrop-filter: blur(10px); border-radius: 30px 30px 0 0; } .forecast-row { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 1px solid rgba(255,255,255,0.2); } .forecast-day { width: 80px; font-weight: 500; } .forecast-icon svg { width: 24px; height: 24px; fill: white; } .forecast-temps { width: 80px; text-align: right; opacity: 0.9; }
        #managerApp { background-color: #f7f7f7; } .manager-main { display: flex; flex-direction: column; align-items: center; padding: 30px 0; background: white; border-radius: 0 0 30px 30px; box-shadow: 0 5px 20px rgba(0,0,0,0.05); } .score-circle { width: 180px; height: 180px; border-radius: 50%; border: 8px solid #2ecc71; display: flex; flex-direction: column; justify-content: center; align-items: center; margin-bottom: 20px; transition: 0.5s; } .score-circle span { font-size: 60px; font-weight: bold; color: #2ecc71; } .score-circle small { font-size: 14px; color: #888; } .score-circle.optimizing { border-color: #ddd; border-top-color: #2ecc71; animation: spin 1s infinite linear; } @keyframes spin { 100% { transform: rotate(360deg); } } .opt-btn { background: #2ecc71; color: white; border: none; padding: 12px 40px; border-radius: 30px; font-size: 16px; font-weight: bold; cursor: pointer; box-shadow: 0 5px 15px rgba(46, 204, 113, 0.4); transition: 0.2s; } .opt-btn:active { transform: scale(0.95); } .manager-tools { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; padding: 25px; } .tool-card { background: white; padding: 20px; border-radius: 15px; display: flex; flex-direction: column; align-items: center; gap: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); } .tool-icon { width: 40px; height: 40px; background: #e8f8f5; border-radius: 10px; display: flex; justify-content: center; align-items: center; color: #2ecc71; font-size: 20px; } .tool-name { font-size: 14px; font-weight: 500; color: #333; }
        #notesApp, #mailApp { background: #fff; } .notes-list, .mail-list { padding: 15px; flex: 1; overflow-y: auto; } .note-card { background: #fff9c4; padding: 15px; border-radius: 12px; margin-bottom: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); cursor: pointer; } .note-card h3 { font-size: 16px; margin-bottom: 5px; color: #333; } .note-card p { font-size: 13px; color: #666; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .mail-item { display: flex; gap: 15px; padding: 15px 0; border-bottom: 1px solid #eee; cursor: pointer; } .mail-avatar { width: 40px; height: 40px; border-radius: 50%; background: #e91e63; color: white; display: flex; justify-content: center; align-items: center; font-weight: bold; font-size: 16px; } .mail-content { flex: 1; min-width: 0; } .mail-sender { font-weight: 600; font-size: 15px; display: flex; justify-content: space-between; } .mail-time { font-weight: 400; color: #888; font-size: 12px; } .mail-subject { font-weight: 500; font-size: 14px; color: #333; margin: 2px 0; } .mail-snippet { font-size: 13px; color: #888; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        #filesApp { background-color: #f5f5f5; } .storage-box { background: white; padding: 20px; margin: 20px; border-radius: 15px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); } .storage-title { display: flex; justify-content: space-between; font-weight: 600; font-size: 16px; margin-bottom: 10px; } .storage-bar-bg { height: 8px; background: #eee; border-radius: 4px; margin-bottom: 10px; overflow: hidden; } .storage-bar-fill { height: 100%; width: 65%; background: linear-gradient(90deg, #f1c40f, #f39c12); } .storage-detail { font-size: 13px; color: #888; } .file-cats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; padding: 0 20px; margin-bottom: 20px; } .file-cat-item { background: white; padding: 15px 10px; border-radius: 15px; display: flex; flex-direction: column; align-items: center; gap: 8px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.03); } .cat-icon { width: 40px; height: 40px; display: flex; justify-content: center; align-items: center; border-radius: 50%; font-size: 20px; } .cat-name { font-size: 13px; color: #333; } .recent-files-title { padding: 0 20px; font-size: 16px; font-weight: 600; margin-bottom: 10px; } .file-list { background: white; margin: 0 20px; border-radius: 15px; padding: 0 15px; } .file-row { display: flex; align-items: center; padding: 15px 0; border-bottom: 1px solid #eee; gap: 15px; } .file-row:last-child { border-bottom: none; } .file-icon-sm { width: 35px; height: 35px; background: #eee; border-radius: 8px; display: flex; justify-content: center; align-items: center; font-size: 18px; } .file-info { flex: 1; } .file-name { font-size: 14px; font-weight: 500; } .file-meta { font-size: 12px; color: #888; margin-top: 2px; }

        /* Camera Flash Effect */
        .flash-effect {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-color: white; opacity: 0; pointer-events: none; z-index: 1000;
        }
        .flash-effect.flash { animation: flash 0.4s ease-out; }
        @keyframes flash { from { opacity: 0.7; } to { opacity: 0; } }

        @media (max-width: 450px) {
            .dock { gap: 10px; padding: 15px 20px; bottom: 75px; width: 90%; justify-content: space-between; }
            .app-icon { width: 55px; height: 55px; border-radius: 13px; }
            .home-screen { padding-top: 60px; gap: 20px; }
            .dial-key, .call-btn { width: 65px; height: 65px; }
            .recents-card { min-width: 200px; height: 350px; }
            .album-art { width: 200px; height: 200px; }
            .live-clock { font-size: 50px; }
        }
    </style>
</head>
<body>

    <div class="punch-hole"></div>
    <div class="status-bar" id="statusBar">
        <div class="time">9:41</div>
        <div class="icons">
            <svg viewBox="0 0 24 24"><path d="M2,22 L22,22 L22,2 L2,22 Z" /></svg>
            <svg viewBox="0 0 24 24"><path d="M12,3C7.6,3 3.5,4.5 0.3,7.1L1.7,8.5C4.5,6.3 8.1,5 12,5C15.9,5 19.5,6.3 22.3,8.5L23.7,7.1C20.5,4.5 16.4,3 12,3ZM12,7C8.7,7 5.6,8.2 3.1,10.1L4.5,11.5C6.6,9.9 9.2,9 12,9C14.8,9 17.4,9.9 19.5,11.5L20.9,10.1C18.4,8.2 15.3,7 12,7ZM12,11C9.7,11 7.6,11.8 6,13L12,19L18,13C16.4,11.8 14.3,11 12,11Z"/></svg>
            <svg viewBox="0 0 24 24" class="battery-icon"><path d="M17,7 L4,7 C2.9,7 2,7.9 2,9 L2,15 C2,16.1 2.9,17 4,17 L17,17 C18.1,17 19,16.1 19,15 L19,9 C19,7.9 18.1,7 17,7 M22,10 L22,14" stroke="white" stroke-width="2" fill="none"/><rect x="4" y="9" width="11" height="6" fill="white" /></svg>
        </div>
    </div>

    <!-- PANELS -->
    <div id="notificationPanel" class="overlay-panel"><div class="clock-large">9:41</div><div class="date-large">Monday, November 20</div><div class="notif-card"><div class="notif-icon" style="background:#34C759">M</div><div class="notif-content"><h4>Messages</h4><p>Orkhan: Codes ready?</p></div></div></div>
    <div id="quickPanel" class="overlay-panel"><div class="quick-grid"><div class="quick-toggle active" onclick="toggleBtn(this)"><div class="quick-icon-circle"><svg style="width:16px; fill:currentColor" viewBox="0 0 24 24"><path d="M12 3C7.6 3 3.5 4.5 0.3 7.1L1.7 8.5C4.5 6.3 8.1 5 12 5C15.9 5 19.5 6.3 22.3 8.5L23.7 7.1C20.5 4.5 16.4 3 12 3ZM12 7C8.7 7 5.6 8.2 3.1 10.1L4.5 11.5C6.6 9.9 9.2 9 12 9C14.8 9 17.4 9.9 19.5 11.5L20.9 10.1C18.4 8.2 15.3 7 12 7ZM12 11C9.7 11 7.6 11.8 6 13L12 19L18 13C16.4 11.8 14.3 11 12 11Z"/></svg></div><span>Wi-Fi</span></div><div class="quick-toggle active" onclick="toggleBtn(this)"><div class="quick-icon-circle">B</div><span>Bluetooth</span></div><div class="quick-toggle" onclick="toggleBtn(this)"><div class="quick-icon-circle">‚úàÔ∏è</div><span>Airplane</span></div><div class="quick-toggle" onclick="toggleBtn(this)"><div class="quick-icon-circle">üî¶</div><span>Flashlight</span></div></div><div class="slider-container"><div class="slider-icon">‚òÄÔ∏è</div><div class="slider-bar"><div class="slider-fill"></div></div></div></div>

    <!-- WRAPPER FOR FEED AND HOME -->
    <div id="pageContainer">
        <!-- FEED SCREEN -->
        <div class="feed-screen">
            <div class="feed-search"><span>üîç</span> Search...</div>
            <div class="feed-widget calendar-widget"><div class="widget-title">Calendar</div><h2>Monday, December 1</h2><p>No events today</p></div>
            <div class="feed-widget news-widget"><div class="widget-title">News</div><div class="news-item"><img src="https://images.unsplash.com/photo-1504711434969-e33886168f5c?q=80&w=100" class="news-img"><div class="news-text"><h4>Technology news update</h4><span>2 hours ago</span></div></div><div class="news-item"><img src="https://images.unsplash.com/photo-1493612276216-ee3925520721?q=80&w=100" class="news-img"><div class="news-text"><h4>Weather forecast changed</h4><span>5 hours ago</span></div></div></div>
        </div>

        <!-- HOME SCREEN -->
        <div class="home-screen" id="homeScreen">
            <div class="app-item"><div class="app-icon photos"><img src="gallery.png" alt="Gallery"></div><span class="app-label">Gallery</span></div>
            <div class="app-item" onclick="openApp('settings')"><div class="app-icon settings"><img src="Settings.png" alt="Settings"></div><span class="app-label">Settings</span></div>
            <div class="app-item" onclick="openApp('appstore')"><div class="app-icon appstore"><img src="appstore.png" alt="App Store"></div><span class="app-label">App Store</span></div>
            <div class="app-item" onclick="openApp('music')"><div class="app-icon music"><img src="music.png" alt="Music"></div><span class="app-label">Music</span></div>
            <div class="app-item" onclick="openApp('clock')"><div class="app-icon clock-icon"><img src="clock.png" alt="Clock"></div><span class="app-label">Clock</span></div>
            <div class="app-item" onclick="openApp('weather')"><div class="app-icon weather"><img src="weather.png" alt="Weather"></div><span class="app-label">Weather</span></div>
            <div class="app-item" onclick="openApp('manager')"><div class="app-icon manager"><img src="phone-manager.png" alt="Phone Manager"></div><span class="app-label">Phone Manager</span></div>
            <div class="app-item" onclick="openApp('notes')"><div class="app-icon notes"><img src="notes.png" alt="Notes"></div><span class="app-label">Notes</span></div>
            <div class="app-item" onclick="openApp('mail')"><div class="app-icon mail"><img src="mail.png" alt="Mail"></div><span class="app-label">Mail</span></div>
            <div class="app-item" onclick="openApp('files')"><div class="app-icon files"><img src="files.png" alt="Files"></div><span class="app-label">Files</span></div>
        </div>
    </div>

    <!-- DOCK BAR -->
    <div class="dock" id="dockBar">
        <div class="app-icon phone" onclick="openApp('phone')"><img src="phone.png" alt="Phone"></div>
        <div class="app-icon message" onclick="openApp('messages')"><img src="messaging.png" alt="Messages"></div>
        <div class="app-icon safari" onclick="openApp('browser')"><img src="browser.png" alt="Browser"></div>
        <div class="app-icon camera" onclick="openApp('camera')"><img src="camera.png" alt="Camera"></div>
    </div>

    <!-- RECENTS SCREEN -->
    <div class="recents-screen" id="recentsScreen">
        <div class="recents-list" id="recentsList"><div class="no-recents">No open apps</div></div>
        <button class="clear-all-btn" onclick="clearRecents()">Clear All</button>
    </div>

    <!-- APPS -->
    <div class="app-window" id="settingsApp">
        <div class="header-light"><h1>Settings</h1><div class="search-bar"><span>üîç</span> Search</div></div>
        <div class="settings-content" style="flex:1; overflow-y:auto; padding-top:20px;">
            <div class="settings-group"><div class="settings-row"><div class="row-icon bg-gray">üë§</div><div style="flex:1"><b>User</b><br><small style="color:gray">Apple ID</small></div><div>‚Ä∫</div></div></div>
            <div class="settings-group">
                <div class="settings-row"><div class="row-icon bg-blue"><svg viewBox="0 0 24 24"><path d="M12 3c-4.4 0-8.5 1.5-11.7 4.1l1.4 1.4c2.8-2.3 6.4-3.5 10.3-3.5 3.9 0 7.5 1.3 10.3 3.5l1.4-1.4c-3.2-2.6-7.3-4.1-11.7-4.1zM12 7c-3.3 0-6.4 1.2-8.9 3.1l1.4 1.4c2.1-1.6 4.7-2.5 7.5-2.5s5.4.9 7.5 2.5l1.4-1.4c-2.5-2-5.6-3.1-8.9-3.1zM12 11c-2.3 0-4.4.8-6.1 2.2l6.1 6.1 6-6.1c-1.7-1.3-3.8-2.2-6-2.2z" fill="white"/></svg></div><div class="row-text">Wi-Fi</div><div class="row-arrow" style="margin-right:10px;font-size:13px;color:#8e8e93;">Off</div><div class="row-arrow">‚Ä∫</div></div>
                <div class="settings-row"><div class="row-icon bg-green"><svg viewBox="0 0 24 24"><path d="M2,22 L22,22 L22,2 L2,22 Z" fill="white"/></svg></div><div class="row-text">Mobile network</div><div class="row-arrow">‚Ä∫</div></div>
                <div class="settings-row"><div class="row-icon bg-blue" style="font-weight:bold;">B</div><div class="row-text">Bluetooth</div><div class="row-arrow">‚Ä∫</div></div>
                <div class="settings-row"><div class="row-icon bg-orange"><svg viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z" fill="white"/></svg></div><div class="row-text">Connection & Sharing</div><div class="row-arrow">‚Ä∫</div></div>
            </div>
        </div>
    </div>
    <div class="app-window" id="phoneApp"><div class="phone-display-area"><div id="phoneNumber"></div></div><div class="dialer-pad"><div class="dialer-grid"><div class="dial-key" onclick="typeNumber('1')"><span class="dial-num">1</span></div><div class="dial-key" onclick="typeNumber('2')"><span class="dial-num">2</span></div><div class="dial-key" onclick="typeNumber('3')"><span class="dial-num">3</span></div><div class="dial-key" onclick="typeNumber('4')"><span class="dial-num">4</span></div><div class="dial-key" onclick="typeNumber('5')"><span class="dial-num">5</span></div><div class="dial-key" onclick="typeNumber('6')"><span class="dial-num">6</span></div><div class="dial-key" onclick="typeNumber('7')"><span class="dial-num">7</span></div><div class="dial-key" onclick="typeNumber('8')"><span class="dial-num">8</span></div><div class="dial-key" onclick="typeNumber('9')"><span class="dial-num">9</span></div><div class="dial-key">*</div><div class="dial-key" onclick="typeNumber('0')">0</div><div class="dial-key">#</div><div style="grid-column: 1/4; display:flex; justify-content:center;"><div class="call-btn"><svg viewBox="0 0 24 24"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/></svg></div></div></div></div></div>
    <div class="app-window" id="messagesApp"><div class="header-light"><h1>Messages</h1><div class="search-bar"><span>üîç</span> Search</div></div><div class="msg-list"><div class="msg-row"><div class="msg-avatar" style="background:#007AFF">M</div><div class="msg-content"><div class="msg-name">Mom <span class="msg-date">9:41</span></div><div class="msg-preview">When are you coming home?</div></div></div></div></div>
    <div class="app-window" id="browserApp"><div class="browser-toolbar"><div class="url-box">üîí google.com</div></div><div class="browser-content"><div class="google-logo"><span class="g-blue">G</span><span class="g-red">o</span><span class="g-yellow">o</span><span class="g-blue">g</span><span class="g-green">l</span><span class="g-red">e</span></div><div class="fake-search">Search...</div></div></div>
    <div class="app-window" id="cameraApp"><div class="camera-view"><div class="flash-effect" id="flashOverlay"></div><video id="cameraFeed" autoplay playsinline muted></video></div><div class="camera-controls"><div class="cam-icon-btn"></div><div class="shutter-btn" onclick="takePicture()"></div><div class="cam-icon-btn"></div></div></div>
    <div class="app-window" id="appStoreApp"><div class="header-light"><h1>App Store</h1><div class="search-bar"><span>üîç</span> Games, Apps, Stories</div></div><div class="store-content"><div class="store-featured"><div class="featured-text"><h3>Today</h3><h2>Game of the Day</h2><p>An epic adventure awaits you.</p></div></div><div class="store-section-title">Popular Apps <a href="#">See All</a></div><div class="store-list"><div class="store-item"><div class="store-item-icon"><img src="https://images.unsplash.com/photo-1611162617474-5b21e879e113?q=80&w=100"></div><div class="store-item-info"><div class="store-item-name">Instagram</div></div><button class="get-btn" onclick="downloadApp(this)">GET</button></div></div></div></div>
    <div class="app-window" id="musicApp"><div class="music-hero"><div class="album-art"><img src="https://images.unsplash.com/photo-1614613535308-eb5fbd3d2c17?q=80&w=600&auto=format&fit=crop"></div><div class="music-info"><div class="music-title">Blinding Lights</div><div class="music-artist">The Weeknd</div></div><div class="player-controls"><div class="ctrl-btn"><svg viewBox="0 0 24 24"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/></svg></div><div class="play-btn" onclick="togglePlay(this)"><svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></div><div class="ctrl-btn"><svg viewBox="0 0 24 24"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></svg></div></div></div><div class="header-light" style="padding: 20px;"><h1>Library</h1></div><div class="song-list-container"><div class="song-row"><div class="song-idx">1</div><div class="song-meta"><div class="song-name">Starboy</div></div><div class="song-dur">3:50</div></div></div></div>
    <div class="app-window" id="clockApp"><div class="clock-container"><div class="live-clock" id="liveClockDisplay">12:00:00</div><div class="live-date" id="liveDateDisplay">Monday, Dec 1</div></div><div class="clock-tabs"><div><span>‚è∞</span>Alarm</div><div class="active"><span>clock</span>Clock</div><div><span>‚è±</span>Stopwatch</div></div></div>
    <div class="app-window" id="weatherApp"><div class="weather-main"><div class="weather-city">Baku</div><div class="weather-temp">24¬∞</div><div class="weather-condition">Sunny<div class="weather-icon-large"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="5" stroke="white" stroke-width="2" fill="none"/><path d="M12 2V4M12 20V22" stroke="white" stroke-width="2"/></svg></div></div></div><div class="weather-forecast"><div class="forecast-row"><div class="forecast-day">Today</div><div class="forecast-icon"><svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="5" stroke="white" stroke-width="2" fill="none"/></svg></div><div class="forecast-temps">26¬∞ / 18¬∞</div></div></div></div>
    
    <div class="app-window" id="managerApp">
        <div class="header-light"><h1>Phone Manager</h1></div>
        <div class="manager-main"><div class="score-circle" id="scoreCircle"><span id="optScore">85</span><small>Score</small></div><button class="opt-btn" onclick="startOptimization(this)">Optimize</button></div>
        <div class="manager-tools"><div class="tool-card"><div class="tool-icon">üßπ</div><span class="tool-name">Clean Up</span></div><div class="tool-card"><div class="tool-icon">üõ°Ô∏è</div><span class="tool-name">Virus Scan</span></div><div class="tool-card"><div class="tool-icon">üîí</div><span class="tool-name">Privacy</span></div><div class="tool-card"><div class="tool-icon">üîã</div><span class="tool-name">Battery</span></div></div>
    </div>

    <div class="app-window" id="notesApp"><div class="header-light"><h1>Notes</h1><div class="search-bar"><span>üîç</span> Search</div></div><div class="notes-list"><div class="note-card"><h3>Shopping list</h3><p>Milk, Bread, Eggs, Cheese, Butter...</p></div><div class="note-card" style="background:#e1f5fe"><h3>Project Ideas</h3><p>New website design, mobile application...</p></div></div></div>
    <div class="app-window" id="mailApp"><div class="header-light"><h1>Inbox</h1><div class="search-bar"><span>üîç</span> Search mail</div></div><div class="mail-list"><div class="mail-item"><div class="mail-avatar">G</div><div class="mail-content"><div class="mail-sender">Google <span class="mail-time">10:30</span></div><div class="mail-subject">Login</div><div class="mail-snippet">New login detected...</div></div></div></div></div>
    <div class="app-window" id="filesApp"><div class="header-light"><h1>My Files</h1><div class="search-bar"><span>üîç</span> Search file</div></div><div class="store-content"><div class="storage-box"><div class="storage-title"><span>Internal storage</span><span>65%</span></div><div class="storage-bar-bg"><div class="storage-bar-fill"></div></div><div class="storage-detail">83.2GB used of 128GB</div></div><div class="file-cats"><div class="file-cat-item"><div class="cat-icon" style="background:#fff3e0; color:#f57c00">üñºÔ∏è</div><span class="cat-name">Images</span></div><div class="file-cat-item"><div class="cat-icon" style="background:#e3f2fd; color:#1976d2">üé•</div><span class="cat-name">Videos</span></div><div class="file-cat-item"><div class="cat-icon" style="background:#e8f5e9; color:#388e3c">üéµ</div><span class="cat-name">Audio</span></div><div class="file-cat-item"><div class="cat-icon" style="background:#f3e5f5; color:#7b1fa2">üìÑ</div><span class="cat-name">Documents</span></div><div class="file-cat-item"><div class="cat-icon" style="background:#ffebee; color:#d32f2f">‚¨áÔ∏è</div><span class="cat-name">Downloads</span></div><div class="file-cat-item"><div class="cat-icon" style="background:#eceff1; color:#455a64">ü§ñ</div><span class="cat-name">APKs</span></div></div><div class="recent-files-title">Recent files</div><div class="file-list"><div class="file-row"><div class="file-icon-sm">üìÑ</div><div class="file-info"><div class="file-name">Project_Report.pdf</div><div class="file-meta">10:30 ‚Ä¢ 2.4 MB</div></div></div><div class="file-row"><div class="file-icon-sm">üñºÔ∏è</div><div class="file-info"><div class="file-name">IMG_20231201.jpg</div><div class="file-meta">Yesterday ‚Ä¢ 3.1 MB</div></div></div></div></div></div>

    <!-- NAV BAR -->
    <div class="nav-bar" id="navBar">
        <!-- Back (Chevron) -->
        <svg class="nav-btn" onclick="goBack()" viewBox="0 0 24 24">
            <path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"/>
        </svg>
        <!-- Home (Circle) -->
        <svg class="nav-btn" onclick="closeAllApps()" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="7"/>
        </svg>
        <!-- Recents (Square) -->
        <svg class="nav-btn" onclick="toggleRecents()" viewBox="0 0 24 24">
            <rect x="7" y="7" width="10" height="10" rx="1.5"/>
        </svg>
    </div>
    
    <!-- AUDIO ELEMENT -->
    <audio id="shutterSound" src="/sounds/ui/camera_click.ogg" preload="auto"></audio>

    <script>
        // --- VARIABLES ---
        const appsInfo = {
            'settings': { name: 'Settings', icon: '<img src="Settings.png">' },
            'phone': { name: 'Phone', icon: '<img src="phone.png">' },
            'messages': { name: 'Messages', icon: '<img src="messaging.png">' },
            'browser': { name: 'Browser', icon: '<img src="browser.png">' },
            'camera': { name: 'Camera', icon: '<img src="camera.png">' },
            'appstore': { name: 'App Store', icon: '<img src="appstore.png">' },
            'music': { name: 'Music', icon: '<img src="music.png">' },
            'clock': { name: 'Clock', icon: '<img src="clock.png">' },
            'weather': { name: 'Weather', icon: '<img src="weather.png">' },
            'manager': { name: 'Phone Manager', icon: '<img src="phone-manager.png">' },
            'notes': { name: 'Notes', icon: '<img src="notes.png">' },
            'mail': { name: 'Mail', icon: '<img src="mail.png">' },
            'files': { name: 'Files', icon: '<img src="files.png">' },
            'gallery': { name: 'Gallery', icon: '<img src="gallery.png">' }
        };
        let recentApps = [];
        const videoElement = document.getElementById('cameraFeed');
        let stream = null;

        // --- CAMERA ---
        async function startCamera() { try { stream = await navigator.mediaDevices.getUserMedia({ video: true }); videoElement.srcObject = stream; } catch (err) {} }
        function stopCamera() { if (stream) { stream.getTracks().forEach(t => t.stop()); videoElement.srcObject = null; stream = null; } }
        function takePicture() {
            const shutterSound = document.getElementById('shutterSound');
            shutterSound.currentTime = 0;
            shutterSound.play();
            const flashOverlay = document.getElementById('flashOverlay');
            flashOverlay.classList.add('flash');
            setTimeout(() => flashOverlay.classList.remove('flash'), 400);
        }

        // --- SWIPE LOGIC ---
        let startY = 0; let startX = 0; const triggerHeight = 50; const screenWidth = window.innerWidth;
        const triggerSwipeDistance = 50;
        
        document.addEventListener('touchstart', (e) => { startY = e.touches[0].clientY; startX = e.touches[0].clientX; }, {passive: false});
        document.addEventListener('touchend', (e) => {
            let endY = e.changedTouches[0].clientY;
            let endX = e.changedTouches[0].clientX;
            
            // Vertical Swipe (Panels)
            if (startY < triggerHeight && (endY - startY > 50)) {
                if (startX < screenWidth / 2) openPanel('notification'); else openPanel('quick');
            }
            if (startY > window.innerHeight - 100 && (startY - endY > 50)) closePanels();

            // Horizontal Swipe (Feed) - Only on Home Screen area
            if (!document.querySelector('.app-window.active') && !document.querySelector('.overlay-panel.open')) {
                if (endX - startX > triggerSwipeDistance && startX < 50) {
                    document.getElementById('pageContainer').classList.add('show-feed');
                    document.getElementById('dockBar').classList.add('hidden');
                }
                if (startX - endX > triggerSwipeDistance && document.getElementById('pageContainer').classList.contains('show-feed')) {
                    document.getElementById('pageContainer').classList.remove('show-feed');
                    document.getElementById('dockBar').classList.remove('hidden');
                }
            }
        });

        function openPanel(type) { closeAllApps(false); document.getElementById(type === 'notification' ? 'notificationPanel' : 'quickPanel').classList.add('open'); }
        function closePanels() { document.getElementById('notificationPanel').classList.remove('open'); document.getElementById('quickPanel').classList.remove('open'); }
        function toggleBtn(el) { el.classList.toggle('active'); }

        // --- APP LOGIC ---
        function openApp(appName) {
            closeAllApps(false); closePanels();
            document.getElementById('recentsScreen').classList.remove('show');
            recentApps = recentApps.filter(app => app !== appName); recentApps.push(appName);

            const statusBar = document.getElementById('statusBar');
            let appElement;
            if (appName === 'settings') appElement = document.getElementById('settingsApp');
            else if (appName === 'phone') appElement = document.getElementById('phoneApp');
            else if (appName === 'messages') appElement = document.getElementById('messagesApp');
            else if (appName === 'browser') appElement = document.getElementById('browserApp');
            else if (appName === 'camera') appElement = document.getElementById('cameraApp');
            else if (appName === 'appstore') appElement = document.getElementById('appStoreApp');
            else if (appName === 'music') appElement = document.getElementById('musicApp');
            else if (appName === 'clock') appElement = document.getElementById('clockApp');
            else if (appName === 'weather') appElement = document.getElementById('weatherApp');
            else if (appName === 'manager') appElement = document.getElementById('managerApp');
            else if (appName === 'notes') appElement = document.getElementById('notesApp');
            else if (appName === 'mail') appElement = document.getElementById('mailApp');
            else if (appName === 'files') appElement = document.getElementById('filesApp');

            if (appElement) {
                document.querySelector('.nav-bar').classList.add('black-bg');

                if (appName === 'camera' || appName === 'clock' || appName === 'weather') { 
                    if(appName==='camera') startCamera(); 
                    statusBar.classList.remove('dark-mode'); 
                }
                else { statusBar.classList.add('dark-mode'); }
                setTimeout(() => {
                    appElement.classList.add('active');
                    document.getElementById('pageContainer').style.opacity = '0';
                    document.getElementById('dockBar').classList.add('hidden');
                }, 50);
            }
        }

        function closeAllApps(resetHome = true) {
            stopCamera();
            document.querySelectorAll('.app-window').forEach(app => app.classList.remove('active'));
            document.getElementById('recentsScreen').classList.remove('show');
            closePanels();
            document.querySelector('.nav-bar').classList.remove('black-bg');

            if (resetHome) {
                document.getElementById('statusBar').classList.remove('dark-mode');
                document.getElementById('pageContainer').style.opacity = '1';
                document.getElementById('pageContainer').classList.remove('show-feed');
                document.getElementById('dockBar').classList.remove('hidden');
            }
        }

        function goBack() { 
            if (document.getElementById('pageContainer').classList.contains('show-feed')) {
                document.getElementById('pageContainer').classList.remove('show-feed');
                document.getElementById('dockBar').classList.remove('hidden');
            }
            else if (document.getElementById('recentsScreen').classList.contains('show') || document.querySelector('.overlay-panel.open')) { 
                closeAllApps(); 
            } else { 
                closeAllApps(); 
            } 
        }
        
        function toggleRecents() {
            closePanels();
            const recentsScreen = document.getElementById('recentsScreen');
            const recentsList = document.getElementById('recentsList');
            document.querySelectorAll('.app-window').forEach(app => app.classList.remove('active'));
            stopCamera();
            document.getElementById('statusBar').classList.remove('dark-mode');
            document.getElementById('pageContainer').style.opacity = '0.5';
            document.getElementById('dockBar').classList.add('hidden');
            recentsScreen.classList.add('show');
            document.querySelector('.nav-bar').classList.remove('black-bg');

            recentsList.innerHTML = '';
            if (recentApps.length === 0) { recentsList.innerHTML = '<div class="no-recents">No open apps</div>'; return; }
            [...recentApps].reverse().forEach(appName => {
                const appData = appsInfo[appName];
                const card = document.createElement('div');
                card.className = 'recents-card'; card.onclick = () => openApp(appName);
                const header = document.createElement('div'); header.className = 'card-header';
                const iconBox = document.createElement('div'); iconBox.className = 'card-icon';
                if (appData.style) iconBox.style = appData.style + "border-radius:5px; display:flex; justify-content:center; align-items:center;";
                iconBox.innerHTML = appData.icon;
                header.appendChild(iconBox); header.innerHTML += `<span>${appData.name}</span>`;
                const preview = document.createElement('div'); preview.className = 'card-preview';
                const bigIcon = document.createElement('div'); bigIcon.style = "width:60px; height:60px; opacity:0.5;";
                bigIcon.innerHTML = appData.icon;
                preview.appendChild(bigIcon);
                card.appendChild(header); card.appendChild(preview); recentsList.appendChild(card);
            });
        }
        function clearRecents() { recentApps = []; toggleRecents(); setTimeout(() => closeAllApps(), 500); }
        let currentNumber = "";
        function typeNumber(num) { if (currentNumber.length < 15) { currentNumber += num; document.getElementById('phoneNumber').innerText = currentNumber; } }
        function downloadApp(btn) { if (btn.innerText === "OPEN") return; btn.innerText = "DOWNLOADING..."; btn.style.opacity = "0.7"; setTimeout(() => { btn.innerText = "OPEN"; btn.style.opacity = "1"; btn.style.background = "#34C759"; btn.style.color = "white"; }, 2000); }
        let isPlaying = false;
        function togglePlay(btn) {
            isPlaying = !isPlaying;
            if(isPlaying) btn.innerHTML = '<svg viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" fill="white"/></svg>';
            else btn.innerHTML = '<svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z" fill="white"/></svg>';
        }
        function updateClock() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-US', { hour12: false });
            const dateString = now.toLocaleDateString('en-US', { weekday: 'long', month: 'short', day: 'numeric' });
            document.getElementById('liveClockDisplay').innerText = timeString;
            document.getElementById('liveDateDisplay').innerText = dateString;
        }
        setInterval(updateClock, 1000); updateClock();

        function startOptimization(btn) {
            const circle = document.getElementById('scoreCircle');
            const scoreText = document.getElementById('optScore');
            circle.classList.add('optimizing'); btn.innerText = "Checking...";
            setTimeout(() => {
                circle.classList.remove('optimizing'); scoreText.innerText = "100"; btn.innerText = "Optimized"; btn.style.background = "#ddd"; btn.style.color = "#888";
            }, 2000);
        }
    </script>
</body>
</html>